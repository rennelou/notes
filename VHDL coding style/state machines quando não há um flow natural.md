The reason this implementation required a state machine is because there was  
no natural flow to the recursive data

Um flow natural representa uma transição de estados. Onde cada ponto do pipeline um ponto no espaço estado, quando não há esse flow natural é necessário usar máquinas de estados para representar a transição no espaço de estados